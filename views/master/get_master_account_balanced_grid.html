{{extend 'layout.html'}}

<section class="content">
    <div class="row">
        <div class="col-xs-9">
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">Account Balance Grid (Current)</h3>
                </div>
                <div class="box-body table-responsive">                
                    {{=table}}                
                </div>
            </div>
        </div>
        <div class="col-xs-3">
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Account Balance Form</h3>
                </div>
                <div class="box-body">
                    {{=form.custom.begin}}                    
                    <div class="form-group">
                        <label class="control-label">Financial Year</label>
                        <input class="form-control" id="Master_Account_Balance_Current_Year_financial_year" name="financial_year" type="date">
                    </div>
                    <div class="form-group">
                        <label class="control-label">Account Code</label>
                        {{=form.custom.widget.account_code}}
                    </div>
                    <div class="form-group">
                        <label class="control-label">Account Name</label>
                        {{=form.custom.widget.account_name}}
                    </div>
                    <div class="form-group">
                        <label class="control-label">Opening Balance</label>
                        {{=form.custom.widget.total_opening_balance}}
                    </div>
                    <div class="form-group">
                        <label class="control-label">Closing Balance</label>
                        {{=form.custom.widget.total_closing_balance}}
                    </div>
                        <input class="btn btn-flat btn-primary btn-block btn-flat" id="btnSubmit" type="submit" value="Submit">
                        <input class="btn btn-flat btn-warning btn-block btn-flat" type="button" value="Clear" onClick="onClear()"/>                                                                                   
                    {{=form.custom.end}}                    
                </div>
            </div>
        </div>
    </div>      
</section>       



<script>
    $(document).ready(function(){
        $(".table").DataTable();
        $().
        $("#btnSubmit").attr("disabled", "disabled")
        $("#Master_Account_Balance_Current_Year_financial_year, #Master_Account_Balance_Current_Year_account_code, #Master_Account_Balance_Current_Year_account_name, #Master_Account_Balance_Current_Year_opening_balance, #Master_Account_Balance_Current_Year_closing_balance").change(function(){
            if ($("#Master_Account_Balance_Current_Year_financial_year").val() != "" && $("#Master_Account_Balance_Current_Year_account_code").val() != "" && $("#Master_Account_Balance_Current_Year_account_name").val() != "" && $("#Master_Account_Balance_Current_Year_opening_balance").val() != "" && $("#Master_Account_Balance_Current_Year_closing_balance").val() != "" ) {
                $("#btnSubmit").removeAttr("disabled")
            } else {
                $("#btnSubmit").attr("disabled", "disabled")
            }
        });        
    })
    function onClear(){        
        window.location.replace('{{=URL('master','get_master_account_balanced_grid')}}'); 
    }
</script>